---
title: "ãƒ„ã‚§ãƒ©ãƒ¼ã®å…¬å¼ã‚’Rubyã§æ›¸ã„ã¦ã¿ã‚‹"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["himekuri", "zella", "lib"]
published: true # trueã‚’æŒ‡å®šã™ã‚‹
---

### ãƒ„ã‚§ãƒ©ãƒ¼ã®å…¬å¼ã‚’Rubyã§æ›¸ã„ã¦ã¿ã‚‹

ã€€æ—¥ã‚ãã‚Šã‚’éå…¬é–‹ã«ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ›´æ–°ã—ã¦ã„ã¾ã—ãŸã€‚ä¾‹ã‚’å…¬é–‹ã—ã¾ã™ã€‚

```ruby
require 'date'

td = Date.today

year = td.year.to_i
month = td.month.to_i
day = td.day.to_i

(year + year / 4 - year / 100 + year / 400 + (13 * month + 8) / 5 + day) % 7

# week = %w[æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ][td.wday]
week = %w[æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ][calc]

puts "#{year}å¹´#{month}æœˆ#{day}æ—¥ : #{week}æ›œæ—¥"
```

ã€€ã“ã®ã¾ã¾ã ã¨ã†ã‚‹ã†å¹´ã§ãšã‚Œã¾ã™ã€‚å¯¾å‡¦ã—ãŸä¾‹ã‚’æ›¸ãã¾ã™ã€‚æ”¹å–„ã¯ã§ãã‚‹ã¨æƒ³ã„ã¾ã™ã€‚

```ruby
if year % 4 == 0 && year % 100 != 0 || year % 400 == 0
      if "#{month}".match?(/^[2]$/)
        calc = ((365 * year + year / 4 - year / 100 + year / 400 + (306 * (month + 1)) / 10 + day) - 426) % 7
      elsif "#{month}".match?(/^[11]$/)
        calc = ((365 * year + year / 4 - year / 100 + year / 400 + (306 * (month + 1)) / 10 + day) - 427) % 7
      else
        calc = ((365 * year + year / 4 - year / 100 + year / 400 + (306 * (month + 1)) / 10 + day) - 428) % 7
      end
    else
      calc = (year + year / 4 - year / 100 + year / 400 + (13 * month + 8) / 5 + day) % 7
end
```

ã€€ã“ã‚Œã§ã€ä»Šå¹´2024å¹´ã®ã†ã‚‹ã†å¹´ã§ã¯ã€ãšã‚ŒãŒãªããªã‚Šã¾ã—ãŸã€‚æ¬¡ã®ã†ã‚‹ã†å¹´ã§ãšã‚ŒãŸã‚‰ä¿®æ­£ã‚’è€ƒãˆã¾ã™ã€‚ãƒ„ã‚§ãƒ©ãƒ¼ã®å…¬å¼ã‚’ä½¿ã‚ãªã„ã¨ãtd.wdayã§æ›œæ—¥ã‚’å–å¾—ã§ãã¾ã™ã€‚Rubyã§ã¯ãã‚Œã»ã©è¤‡é›‘ã«æ‰‹å‹•ã§å®Ÿè£…ã—ãªãã¦ã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å¯¾å‡¦ã§ãã¾ã™ã€‚

ã€€Rubyã§å®Ÿè£…ã—ã¾ã—ãŸã€‚Java/C#/C++ãªã©ã§ã‚‚æ›¸ã‘ã‚‹ã¨æƒ³ã„ã¾ã™ã€‚å‚è€ƒç¨‹åº¦ã«ã©ã†ãã€‚
